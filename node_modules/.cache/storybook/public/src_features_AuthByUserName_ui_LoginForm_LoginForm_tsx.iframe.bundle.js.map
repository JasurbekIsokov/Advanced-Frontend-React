{"version":3,"file":"src_features_AuthByUserName_ui_LoginForm_LoginForm_tsx.iframe.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;;;;;;;;;;;;ACAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;ACDA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AE1BA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;ACDA;AAAA;AAAA;AADA;AACA;AACA;AACA;AAOA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAHA;AAAA;AAKA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;ACjCA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAMA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AAIA;AAEA;AACA;AAIA;AACA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AAGA;AACA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;ACxEA;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAYA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AATA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://advanced-frontend/./src/entities/user/index.ts","webpack://advanced-frontend/./src/entities/user/model/selectors/getUserAuthData/getUserAuthData.ts","webpack://advanced-frontend/./src/entities/user/model/slice/userSlice.ts","webpack://advanced-frontend/./src/entities/user/model/types/user.ts","webpack://advanced-frontend/./src/features/AuthByUserName/model/selectors/getLoginState/getLoginState.ts","webpack://advanced-frontend/./src/features/AuthByUserName/model/services/loginByUserName/loginByUserName.ts","webpack://advanced-frontend/./src/features/AuthByUserName/model/slice/loginSlice.ts","webpack://advanced-frontend/./src/features/AuthByUserName/ui/LoginForm/LoginForm.tsx","webpack://advanced-frontend/./src/shared/const/localstorage.ts","webpack://advanced-frontend/./src/shared/ui/Text/Text.tsx","webpack://advanced-frontend/./src/features/AuthByUserName/ui/LoginForm/LoginForm.module.scss","webpack://advanced-frontend/./src/shared/ui/Text/Text.module.scss","webpack://advanced-frontend/./src/features/AuthByUserName/ui/LoginForm/LoginForm.module.scss?fdbe","webpack://advanced-frontend/./src/shared/ui/Text/Text.module.scss?b10e"],"sourcesContent":["export { getUserAuthData } from \"./model/selectors/getUserAuthData/getUserAuthData\";\n\nexport { userReducer, userActions } from \"./model/slice/userSlice\";\nexport { UserSchema, User } from \"./model/types/user\";\n","import { StateSchema } from \"app/providers/StoreProvider\";\n\nexport const getUserAuthData = (state: StateSchema) => state.user.authData;\n","import { UserSchema, User } from \"../types/user\";\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { USER_LOCALSTORAGE_KEY } from \"shared/const/localstorage\";\n\nconst initialState: UserSchema = {};\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    setAuthData: (state, action: PayloadAction<User>) => {\n      state.authData = action.payload;\n    },\n    initAuthData: (state) => {\n      const user = localStorage.getItem(USER_LOCALSTORAGE_KEY);\n      if (user) {\n        state.authData = JSON.parse(user);\n      }\n    },\n    logout: (state) => {\n      state.authData = undefined;\n      localStorage.removeItem(USER_LOCALSTORAGE_KEY);\n    },\n  },\n});\n\n// Action creators are generated for each case reducer function\nexport const { actions: userActions } = userSlice;\nexport const { reducer: userReducer } = userSlice;\n","export interface User {\n  id: string;\n  username: string;\n}\n\nexport interface UserSchema {\n  authData?: User;\n}\n","import { StateSchema } from \"app/providers/StoreProvider\";\n\nexport const getLoginState = (state: StateSchema) => state?.loginForm;\n","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { User, userActions } from \"./../../../../../entities/user\";\nimport { USER_LOCALSTORAGE_KEY } from \"shared/const/localstorage\";\n\ninterface LoginByUsernameProps {\n  username: string;\n  password: string;\n}\n\nexport const loginByUsername = createAsyncThunk<\n  User,\n  LoginByUsernameProps,\n  { rejectValue: string }\n>(\"login/loginByUsername\", async (authData, thunkAPI) => {\n  try {\n    const response = await axios.post<User>(\n      \"http://localhost:8000/login\",\n      authData\n    );\n\n    if (!response.data) {\n      throw new Error();\n    }\n\n    localStorage.setItem(USER_LOCALSTORAGE_KEY, JSON.stringify(response.data));\n    thunkAPI.dispatch(userActions.setAuthData(response.data));\n\n    return response.data;\n  } catch (e) {\n    console.log(e);\n    return thunkAPI.rejectWithValue(\"error\");\n  }\n});\n","import { PayloadAction, createSlice } from \"@reduxjs/toolkit\";\nimport { LoginSchema } from \"../types/loginSchema\";\nimport { loginByUsername } from \"../services/loginByUserName/loginByUserName\";\n\nconst initialState: LoginSchema = {\n  isLoading: false,\n  username: \"\",\n  password: \"\",\n};\n\nexport const loginSlice = createSlice({\n  name: \"login\",\n  initialState,\n  reducers: {\n    setUsername: (state, action: PayloadAction<string>) => {\n      state.username = action.payload;\n    },\n    setPassword: (state, action: PayloadAction<string>) => {\n      state.password = action.payload;\n    },\n  },\n\n  extraReducers: (builder) => {\n    builder\n      .addCase(loginByUsername.pending, (state) => {\n        state.error = undefined;\n        state.isLoading = true;\n      })\n      .addCase(loginByUsername.fulfilled, (state, action) => {\n        state.isLoading = false;\n      })\n      .addCase(loginByUsername.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n      });\n  },\n});\n\n// Action creators are generated for each case reducer function\nexport const { actions: loginActions } = loginSlice;\nexport const { reducer: loginReducer } = loginSlice;\n","import { useTranslation } from \"react-i18next\";\nimport { Button, ButtonTheme } from \"shared/ui/Button/Button\";\nimport { Input } from \"shared/ui/Input/Input\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { memo, useCallback } from \"react\";\nimport { Text, TextTheme } from \"shared/ui/Text/Text\";\nimport { loginActions } from \"../../model/slice/loginSlice\";\nimport cls from \"./LoginForm.module.scss\";\nimport { getLoginState } from \"../../model/selectors/getLoginState/getLoginState\";\nimport { classNames } from \"shared/lib/classNames/ClassNames\";\n\ninterface LoginFormProps {\n  className?: string;\n}\n\nexport const LoginForm = memo(({ className }: LoginFormProps) => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const { username, password, error, isLoading } = useSelector(getLoginState);\n\n  const onChangeUsername = useCallback(\n    (value: string) => {\n      dispatch(loginActions.setUsername(value));\n    },\n    [dispatch]\n  );\n\n  const onChangePassword = useCallback(\n    (value: string) => {\n      dispatch(loginActions.setPassword(value));\n    },\n    [dispatch]\n  );\n\n  const onLoginClick = useCallback(() => {\n    // return dispatch(loginByUsername({ username, password }));\n  }, [dispatch, password, username]);\n\n  return (\n    <div className={classNames(cls.LoginForm, {}, [className])}>\n      <Text title={t(\"Форма авторизации\")} />\n      {error && (\n        <Text\n          text={t(\"Вы ввели неверный логин или пароль\")}\n          theme={TextTheme.ERROR}\n        />\n      )}\n      <Input\n        autofocus\n        type=\"text\"\n        className={cls.input}\n        placeholder={t(\"Введите username\")}\n        onChange={onChangeUsername}\n        value={username}\n      />\n      <Input\n        type=\"text\"\n        className={cls.input}\n        placeholder={t(\"Введите пароль\")}\n        onChange={onChangePassword}\n        value={password}\n      />\n      <Button\n        theme={ButtonTheme.OUTLINE}\n        className={cls.loginBtn}\n        onClick={onLoginClick}\n        disabled={isLoading}\n      >\n        {t(\"Войти\")}\n      </Button>\n    </div>\n  );\n});\n","export const USER_LOCALSTORAGE_KEY = \"user\";\n","import { classNames } from \"shared/lib/classNames/ClassNames\";\nimport cls from \"./Text.module.scss\";\n\nexport enum TextTheme {\n  PRIMARY = \"primary\",\n  ERROR = \"error\",\n}\n\ninterface TextProps {\n  className?: string;\n  title?: string;\n  text?: string;\n  theme?: TextTheme;\n}\n\nexport const Text = (props: TextProps) => {\n  const { className, text, title, theme = TextTheme.PRIMARY } = props;\n\n  return (\n    <div className={classNames(cls.Text, { [cls[theme]]: true }, [className])}>\n      {title && <p className={cls.title}>{title}</p>}\n      {text && <p className={cls.text}>{text}</p>}\n    </div>\n  );\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.src-features-AuthByUserName-ui-LoginForm-LoginForm-module__LoginForm--bnkJ9 {\n  display: flex;\n  flex-direction: column;\n  width: 400px;\n}\n\n.src-features-AuthByUserName-ui-LoginForm-LoginForm-module__input--WvK8o {\n  margin-top: 10px;\n}\n\n.src-features-AuthByUserName-ui-LoginForm-LoginForm-module__loginBtn--TxJDF {\n  margin-top: 15px;\n  margin-left: auto;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/features/AuthByUserName/ui/LoginForm/LoginForm.module.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,aAAA;EACA,sBAAA;EACA,YAAA;AACF;;AAEA;EACE,gBAAA;AACF;;AAEA;EACE,gBAAA;EACA,iBAAA;AACF\",\"sourcesContent\":[\".LoginForm {\\n  display: flex;\\n  flex-direction: column;\\n  width: 400px;\\n}\\n\\n.input {\\n  margin-top: 10px;\\n}\\n\\n.loginBtn {\\n  margin-top: 15px;\\n  margin-left: auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"LoginForm\": `src-features-AuthByUserName-ui-LoginForm-LoginForm-module__LoginForm--bnkJ9`,\n\t\"input\": `src-features-AuthByUserName-ui-LoginForm-LoginForm-module__input--WvK8o`,\n\t\"loginBtn\": `src-features-AuthByUserName-ui-LoginForm-LoginForm-module__loginBtn--TxJDF`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.src-shared-ui-Text-Text-module__title--ikI7V {\n  font: var(--font-l);\n  color: var(--primary-color);\n}\n\n.src-shared-ui-Text-Text-module__text--uNJee {\n  font: var(--font-m);\n  color: var(--secondary-color);\n}\n\n.src-shared-ui-Text-Text-module__error--F9oLX .src-shared-ui-Text-Text-module__title--ikI7V {\n  color: var(--red-light);\n}\n.src-shared-ui-Text-Text-module__error--F9oLX .src-shared-ui-Text-Text-module__text--uNJee {\n  color: var(--red-dark);\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/shared/ui/Text/Text.module.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,mBAAA;EACA,2BAAA;AACF;;AAEA;EACE,mBAAA;EACA,6BAAA;AACF;;AAGE;EACE,uBAAA;AAAJ;AAGE;EACE,sBAAA;AADJ\",\"sourcesContent\":[\".title {\\n  font: var(--font-l);\\n  color: var(--primary-color);\\n}\\n\\n.text {\\n  font: var(--font-m);\\n  color: var(--secondary-color);\\n}\\n\\n.error {\\n  .title {\\n    color: var(--red-light);\\n  }\\n\\n  .text {\\n    color: var(--red-dark);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"title\": `src-shared-ui-Text-Text-module__title--ikI7V`,\n\t\"text\": `src-shared-ui-Text-Text-module__text--uNJee`,\n\t\"error\": `src-shared-ui-Text-Text-module__error--F9oLX`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./LoginForm.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n  var p;\n  for (p in a) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n  for (p in b) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (!a[p]) {\n      return false;\n    }\n  }\n  return true;\n};\n    var isNamedExport = !content.locals;\n    var oldLocals = isNamedExport ? namedExport : content.locals;\n\n    module.hot.accept(\n      \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./LoginForm.module.scss\",\n      function () {\n        if (!isEqualLocals(oldLocals, isNamedExport ? namedExport : content.locals, isNamedExport)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = isNamedExport ? namedExport : content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./LoginForm.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./Text.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n  var p;\n  for (p in a) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n  for (p in b) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (!a[p]) {\n      return false;\n    }\n  }\n  return true;\n};\n    var isNamedExport = !content.locals;\n    var oldLocals = isNamedExport ? namedExport : content.locals;\n\n    module.hot.accept(\n      \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./Text.module.scss\",\n      function () {\n        if (!isEqualLocals(oldLocals, isNamedExport ? namedExport : content.locals, isNamedExport)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = isNamedExport ? namedExport : content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./Text.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":[],"sourceRoot":""}